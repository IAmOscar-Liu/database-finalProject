{"version":3,"sources":["components/Header.js","components/Scroll.js","components/GridItems.js","components/MovieContext.js","components/Modal.js","components/Grid.js","components/Nav.js","components/User.js","components/Layout.js","components/Cover.js","pages/About.js","pages/Cart.js","pages/SignIn.js","pages/History.js","pages/Favorites.js","App.js","serviceWorker.js","index.js"],"names":["Header","props","className","children","style","Scroll","GridItems","movies","toggleModal","map","_data","key","title","src","poster_path","alt","vote_average","toFixed","Math","floor","price","onClick","MovieContext","createContext","MovieProvider","useState","popular","undefined","top_rated","cart","isLogin","userInfo","userFav","isUserFavLoaded","userHistory","isHistoryLoaded","isCoverShow","setMovies","Provider","value","uuid","require","default","Modal","data","isBuying","setIsBuying","amount","setAmount","useContext","handleAmount","action","prev","addToFavorite","item","a","alert","axios","post","user_id","id","fav_info","img","backdrop_path","fav_uuid","console","log","e","target","handleCloseModal","fontStyle","release_date","type","buyingMovie","handleSubmit","overview","Grid","isLoading","setIsLoading","searchType","setSearchType","pageIndex","setPageIndex","isModalOpen","setIsModalOpen","top","left","nowPos","setNowPos","selectedMovie","setSelectedMovie","history","useHistory","toggleSearchType","changePageIndex","newPage","fetchMovies","get","result","_d","random","movie","_i","info","choosedMovie","find","m","window","pageYOffset","document","documentElement","scrollTop","pageXOffset","scrollLeft","onscroll","scrollTo","useEffect","push","width","textAlign","Nav","toggleIsUserOpen","isPreferenceOpen","toggleIsPreferenceOpen","isMenuCheckboxChecked","toggleIsMenuCheckboxChecked","exact","to","activeClassName","onChange","checked","User","isEditing","toggleIsEditing","first_name","newFirtName","setNewFirtName","last_name","newLastName","setNewLastName","email","newEmail","setNewEmail","file","setFile","isUpdatingImg","toggleIsUpdatingImg","handleUpdateUser","submitUpdatedUser","firstName","lastName","password","checkResult","message","handleDeleteUser","confirm","handleUploadImg","url","img_name","name","img_url","htmlFor","display","files","includes","firebase","ref","child","put","then","snapshot","getDownloadURL","register_date","Layout","prop","isUserOpen","Cover","About","Cart","addToFavLists","setAddToFavLists","index","handleOrder","length","movies_info","results","saveToFavorite","newUUIDs","i","reduce","acc","current","fontSize","data-last","filter","deleteItem","indexOf","fav","SignIn","enteredFirstName","setEnteredFirstName","enteredLastName","setEnteredLastName","enteredPassword","setEnteredPassword","createdFirstName","setCreatedFirstName","createdLastName","setCreatedLastName","createdPassword","setCreatedPassword","createdEmail","setCreatedEmail","isSigningIn","toggleIsSigningIn","handleEnterChange","handleSignin","handleCreatedChange","handleCreateNewUser","setTimeout","newData","newResult","History","getUserHistory","_movies","historyTable","forEach","_movie","purchase_date","Object","keys","sameTime","st","eachTime","height","reverse","renderUserHistory","Favorites","_favorites","isDeletingFavs","toggleIsDeletingFavs","deleteFavs","setDeleteFavs","isAddToCartFavs","toggleIsAddToCartFavs","addToCartFavs","setAddToCartFavs","getUserFavorites","commitRemoveFav","fav_uuids","del","add_date","_item","buyingMovies","commitAddToCart","App","path","Boolean","location","hostname","match","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.10346667.chunk.js","sourcesContent":["import React from 'react';\nimport './Header.css';\n\n\nfunction Header(props) {\n    //const animRef = React.createRef();\n    // console.log('reload header')\n    // useEffect(() => {\n    //   // console.log(animRef.current.childNodes); \n    //   if(!props.isOpenYet){\n    //     animRef.current.childNodes.forEach(e=>{ \n    //       // document.querySelectorAll('.header-container > div > div span').forEach(e=>{\n    //       console.log('re-anim')\n    //       spanAnimation(e);\n    //       setInterval(() =>spanAnimation(e), 6200);\n    //     })\n    //     props.toggleIsOpenYet();\n    //   }\n    // })\n\n\n    // const spanAnimation = (e) =>{\n    //     setTimeout(()=>{\n    //         e.classList.add('anim');\n    //     },100)\n    //     setTimeout(()=>{\n    //         e.classList.add('fadeout');\n    //     },5100)\n    //     setTimeout(()=>{\n    //         e.classList.remove('anim');\n    //         e.classList.remove('fadeout');\n    //     },6100)        \n    // }\n\n    return (\n    <div className='header-container'>\n      {props.children} \n      <div>\n        <div /*ref={animRef}*/>\n            <span style={{\"--span-index\":1}}>W</span>\n            <span style={{\"--span-index\":2}}>E</span>\n            <span style={{\"--span-index\":3}}>L</span>\n            <span style={{\"--span-index\":4}}>C</span>\n            <span style={{\"--span-index\":5}}>O</span>\n            <span style={{\"--span-index\":6}}>M</span>\n            <span style={{\"--span-index\":7}}>E</span>\n            <span style={{\"--span-index\":8}}></span>\n            <span style={{\"--span-index\":9}}>H</span>\n            <span style={{\"--span-index\":10}}>E</span>\n            <span style={{\"--span-index\":11}}>R</span>\n            <span style={{\"--span-index\":12}}>E</span>\n        </div>\n      </div>  \n    </div>\n    )\n}\n\nexport default Header\n","import React from 'react';\nimport './Scroll.css';\n\nfunction Scroll() {\n    return (\n        <div className=\"scroll-container\">\n            <h1>Pick your favorite movie here!</h1>\n            <div className=\"scroll-container-leftChild\">\n                <div>\n                    <h1>Pick your favorite movie here!</h1>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Scroll\n","import React from 'react'\nimport './GridItems.css';\n\nfunction GridItems({movies, toggleModal}) {  \n    return movies.map(_data => \n      <div key={_data.title} className=\"grid-item\">\n        <img src={`http://image.tmdb.org/t/p/w500/${_data.poster_path}`} alt=\"\" />\n        <p><span>Title: </span><span>{_data.title}</span></p>\n        <div>\n          <span>Rating: </span>\n          <div className=\"star-container\" style={{'--star-rating': (_data.vote_average/2).toFixed(1), '--star-rating-floor': Math.floor(_data.vote_average/2)}}>\n            <div className=\"star-cover\">\n                <div>\n                    <div className=\"star highlight-star\"></div>\n                    <div className=\"star highlight-star\"></div>\n                    <div className=\"star highlight-star\"></div>\n                    <div className=\"star highlight-star\"></div>\n                    <div className=\"star highlight-star\"></div>\n                </div>\n            </div>\n            <div className=\"star\"></div>\n            <div className=\"star\"></div>\n            <div className=\"star\"></div>\n            <div className=\"star\"></div>\n            <div className=\"star\"></div>\n          </div>\n          <span>{(_data.vote_average/2).toFixed(1)}</span>  \n        </div>\n        <p><span>Price: $</span><span>{_data.price}</span></p>\n        <button onClick={()=>toggleModal(_data.title)}>See more</button>\n      </div>\n    )  \n}\n\nexport default GridItems\n","import React, { useState, createContext } from 'react';\n\nexport const MovieContext = createContext();\n\nexport const MovieProvider = props => {\n    const [movies, setMovies] = useState({\n        popular: [undefined, undefined, undefined, undefined, undefined],\n        top_rated: [undefined, undefined, undefined, undefined, undefined],\n        cart: [],\n        isLogin: false,\n        // userInfo: {\n        //     uuid: '',\n        //     first_name: '',\n        //     last_name: '',\n        //     email: '',\n        //     password: '',\n        //     img_name:'',\n        //     img_url: '',\n        //     register_date: ''\n        // },\n        userInfo: {},\n        userFav: [],\n        isUserFavLoaded: false,\n        userHistory: [],\n        isHistoryLoaded: false,\n        isCoverShow: true\n    })\n\n    return(\n        <MovieContext.Provider value={[movies, setMovies]} >\n            {props.children}\n        </MovieContext.Provider>\n    )\n}","import React, { useState, useContext } from 'react';\nimport './Modal.css';\nimport {MovieContext} from './MovieContext';\nimport axios from 'axios';\nconst uuid = require('uuidv4').default;\n\nfunction Modal({data ,toggleModal}) {\n    const [isBuying, setIsBuying] = useState(false);\n    const [amount, setAmount] = useState(1);\n    const [movies, setMovies] = useContext(MovieContext);\n\n    const handleCloseModal = (e) => {\n        if(e.target.id==='outer-container') toggleModal('close');\n    }\n\n    const handleAmount = (action) => {\n        if(action === 'plus' && amount < 5) setAmount(prev => prev+1)\n        if(action === 'minus' && amount > 1) setAmount(prev => prev-1)\n    }\n\n    const handleSubmit = () => {\n      if(movies.isLogin){\n        let buyingMovie ={ \n            title: data.title,\n            img: `http://image.tmdb.org/t/p/w500/${data.backdrop_path}`,\n            price: data.price,\n            amount: amount\n        }\n        //let updatedMovies = movies;\n        //updatedMovies.cart.push(buyingMovie); \n        //setMovies(updatedMovies);\n        setMovies({...movies, cart: [...movies.cart, buyingMovie]});\n        toggleModal('close');\n      }else {\n          alert('You are not logging in!');\n      }\n\n    }\n\n    const addToFavorite = async(item) => {\n        if(!movies.isLogin){\n            alert('You are not logining in');\n            return;\n        }\n        try{\n            await axios.post(`/save_favorites`, {\n                user_id: movies.userInfo.id,\n                uuid: movies.userInfo.uuid, \n                fav_info: [{...item, img: `http://image.tmdb.org/t/p/w500/${item.backdrop_path}`}],\n                fav_uuid: [uuid()]\n            });\n            alert('The movie you choose has been added to favorites!');\n            setMovies({...movies, isUserFavLoaded: false});\n        }catch(err){\n            console.log(err);\n        }\n    }\n\n    return (\n        <div onClick={(e)=>handleCloseModal(e)} id='outer-container' className='outer-container'>\n          <div className='container'>\n\n            <div className='container-bg container-bg-bottom'></div>\n            <div className='container-bg container-bg-mid'></div>\n            <div className='container-bg container-bg-top'></div> \n            \n            <div className='bottom-layer'>\n                <div className=\"bottom-left\">\n                    <h1>Information</h1>\n                    <div className=\"img-container\">\n                        <img src={`http://image.tmdb.org/t/p/w500/${data.backdrop_path}`} alt=\"\" />\n                    </div>\n                    <div className=\"detail-info\">\n                        <p className=\"title\">Title: <span><i style={{fontStyle: 'normal'}}>{data.title}</i></span></p>\n                        <p className=\"date\">Date: <span>{data.release_date}</span></p>\n                        <p className=\"rating\">Rating: <span>{(data.vote_average/2).toFixed(1)}</span></p>    \n                        <p className='price'>Price: <span>{data.price}</span></p>                \n                    </div>\n                    <section>\n                        <button onClick={()=>setIsBuying(prev => !prev)} >Buy Now</button>\n                        <button onClick={()=>toggleModal('close')}>Exit</button>\n                    </section>\n                    \n                </div>\n                \n                <div className=\"bottom-right\">\n                    <h1>How many of this one would you like to buy?</h1>\n                    <div className=\"detail-info\">\n                        <p className=\"title\">Title: <span><i style={{fontStyle: 'normal'}}>{data.title}</i></span></p>\n                        <p className=\"price\">Each One: <span>{data.price}</span></p>\n                        <p className=\"amount\">Amount: <span>{amount}</span>\n                            <input type='button' className={amount===5 ? \"disable\" : \"\"} onClick={()=>handleAmount('plus')} id='plusBtn' value=\"+\" />\n                            <input type='button' className={amount===1 ? \"disable\" : \"\"} onClick={()=>handleAmount('minus')} id='minusBtn' value=\"–\" />\n                        </p>\n                        <p className=\"total\">Total: <span>{data.price * amount}</span></p>            \n                    </div>\n                    <section>\n                        <button onClick={()=>setIsBuying(prev=>!prev)}>Back</button>\n                        <button onClick={()=>handleSubmit()}>Submit</button>\n                    </section>\n\n                </div>\n            </div>\n\n            <div className={`top-layer ${isBuying ? \"buy\": \"\" }`} >\n                <div className='transparent-bg'>\n                    <div className={isBuying ? \"buy\" : \"\"}>\n                        <div className=\"left-info\">\n                            <h1>Thanks for buying our product</h1>\n                            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Deserunt ducimus repudiandae esse neque laudantium sunt numquam, est error tenetur, id, ipsam nostrum odit dolorem!</p>\n                        </div>\n                        <div className=\"right-info\">\n                            <h1 className='title'><span><i style={{fontStyle: 'normal'}}>{data.title}</i></span></h1>\n                            <div>\n                                <h2>Overview: <button className='add-to-fav-btn' onClick={()=>addToFavorite(data)}>Add to Favorite</button></h2>\n                                <p id=\"overview\">{data.overview}</p>\n                            </div>\n                        </div>\n                    </div>    \n                </div>     \n            </div>            \n          </div>            \n        </div>\n    )\n}\n\nexport default Modal\n","import React, {useContext, useState, useEffect} from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './Grid.css';\nimport GridItems from './GridItems';\nimport Modal from './Modal';\nimport {MovieContext} from './MovieContext';\nimport axios from 'axios';\n\n// `https://api.themoviedb.org/3/movie/${searchType}?api_key=5fb93387541fc093f329bc1481d3b3e8&language=en-US&page=${pageIndex}`\n\nfunction Grid() {\n    const [movies, setMovies] = useContext(MovieContext);\n    const [isLoading, setIsLoading] = useState(false);\n    const [searchType, setSearchType] = useState('top_rated');\n    const [pageIndex, setPageIndex] = useState(1);\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [nowPos, setNowPos] = useState({\n        top: 0,\n        left: 0\n    })\n    const [selectedMovie, setSelectedMovie] = useState({});\n    const history = useHistory();\n\n    const toggleSearchType = () => {\n        setPageIndex(prev => 1);\n        setSearchType(prev => prev === 'top_rated' ? 'popular' : 'top_rated');\n    }\n\n    const changePageIndex = newPage => {\n        if(newPage === 'next' && pageIndex < 5){\n            setPageIndex(prev => prev+1);\n            //fetchMovies();\n            return;\n        }\n        if(newPage === 'prev' && pageIndex > 1){\n            setPageIndex(prev => prev-1);\n            //fetchMovies();\n            return;\n        }\n        setPageIndex(prev => newPage);\n        //fetchMovies();\n    }\n\n    const fetchMovies = async() => {\n        \n        if(movies[searchType][pageIndex-1]) return;\n        // console.log('start fetching');\n\n        try{\n            setIsLoading(true);\n            const result = await axios.get(`/search_movies/${searchType}/${pageIndex}`);\n            //const result = await axios.get('/search_movies');\n            let data = result.data.data;\n            data = data.map(_d =>{ return {..._d, price: Math.floor(Math.random()*100+100)}});\n            // console.log(data);\n            // let nowMovies = movies;\n            // nowMovies[searchType][pageIndex] = data;\n            // setMovies(nowMovies);\n            if(searchType === 'top_rated') setMovies({...movies, top_rated: movies.top_rated.map((movie, _i) => pageIndex - 1 === _i ? data : movie )});\n            else setMovies({...movies, popular: movies.popular.map((movie, _i) => pageIndex - 1 === _i ? data : movie)});\n            setIsLoading(false);\n        }catch(err){\n            console.log(err);\n        }\n    }\n\n    const toggleModal = (info) => {\n        // console.log(info);\n        if(!isModalOpen){\n            //console.log(info)\n            const choosedMovie = movies[searchType][pageIndex-1].find(m => m.title === info);\n            //console.log(choosedMovie);\n            setSelectedMovie(choosedMovie);\n            setNowPos({\n                top: window.pageYOffset || document.documentElement.scrollTop,\n                left: window.pageXOffset || document.documentElement.scrollLeft\n            })\n        }\n        setIsModalOpen(prev => !prev);\n    }\n\n    window.onscroll = () => {\n        //console.log('scrolling')\n        if(isModalOpen) window.scrollTo(nowPos.left, nowPos.top); \n        if(movies.isCoverShow) window.scrollTo(0, 0);\n    }\n    \n    useEffect(() => {\n        window.scrollTo(0, 0);\n        fetchMovies();\n        return () => {         \n        };\n    }, [searchType, pageIndex])\n\n    return (\n    <div className=\"grid-outer-container\">\n        {isModalOpen ? <Modal data={selectedMovie} toggleModal={toggleModal} /> : ''}\n        <div className=\"button-group\">\n            <button onClick={()=>changePageIndex('prev')}>Prev</button>\n            <button className={pageIndex===1 ? 'active' : ''} onClick={()=>changePageIndex(1)}>1</button>\n            <button className={pageIndex===2 ? 'active' : ''} onClick={()=>changePageIndex(2)}>2</button>\n            <button className={pageIndex===3 ? 'active' : ''} onClick={()=>changePageIndex(3)}>3</button>\n            <button className={pageIndex===4 ? 'active' : ''} onClick={()=>changePageIndex(4)}>4</button>\n            <button className={pageIndex===5 ? 'active' : ''} onClick={()=>changePageIndex(5)}>5</button>\n            <button onClick={()=>changePageIndex('next')}>Next</button>\n        </div>\n\n        <div className=\"movieType-btn-container\">\n            <button className={searchType === 'top_rated' ? 'active' : ''} onClick={()=>{if(searchType!=='top_rated') toggleSearchType()}}>Top Rated</button>\n            <button className={searchType === 'top_rated' ? '' : 'active'} onClick={()=>{if(searchType==='top_rated') toggleSearchType()}}>Popular</button>\n        </div>\n        \n        <div className=\"shoppinglist-btn-container\">\n            <button onClick={()=> history.push('/cart')}>My Cart</button>\n        </div>\n\n        {isLoading || movies[searchType][pageIndex-1]===undefined ? <h1 style={{width: '100%', textAlign:'center'}}>Loading...</h1> : \n          <div className=\"grid-container\">\n            <GridItems movies={movies[searchType][pageIndex-1]} toggleModal={toggleModal} />\n          </div>\n        }\n\n        <div className=\"button-group bottom\">\n        <button onClick={()=>changePageIndex('prev')}>Prev</button>\n        <button className={pageIndex===1 ? 'active' : ''} onClick={()=>changePageIndex(1)}>1</button>\n            <button className={pageIndex===2 ? 'active' : ''} onClick={()=>changePageIndex(2)}>2</button>\n            <button className={pageIndex===3 ? 'active' : ''} onClick={()=>changePageIndex(3)}>3</button>\n            <button className={pageIndex===4 ? 'active' : ''} onClick={()=>changePageIndex(4)}>4</button>\n            <button className={pageIndex===5 ? 'active' : ''} onClick={()=>changePageIndex(5)}>5</button>\n            <button onClick={()=>changePageIndex('next')}>Next</button>\n        </div>\n    </div>\n    )\n}\n\nexport default Grid\n","import React, {useContext, useState} from 'react';\nimport {NavLink, useHistory} from 'react-router-dom';\nimport './Nav.css';\nimport {MovieContext} from './MovieContext';\n\nfunction Nav({toggleIsUserOpen}) {\n    let history = useHistory();\n    const [movies, setMovies] = useContext(MovieContext);\n    const [isPreferenceOpen, toggleIsPreferenceOpen] = useState(false);\n    const [isMenuCheckboxChecked, toggleIsMenuCheckboxChecked] = useState(false);\n    \n    return (\n        <div className='nav-container'>\n            <header>\n              <h1>\n                <i className=\"fas fa-video\"></i>\n                <span>Movie Center</span>\n              </h1>\n\n              <nav>\n                  <ul>\n                      <li><NavLink exact to=\"/\" activeClassName=\"link-active\">Home</NavLink></li>\n                      <li><NavLink to={movies.isCoverShow ? `/` : `/about`} activeClassName={movies.isCoverShow ? '': \"link-active\"}>About</NavLink></li>\n                      <li><NavLink to={movies.isCoverShow ? `/` : `/signin`} activeClassName={movies.isCoverShow ? '': \"link-active\"}>{movies.isLogin ? 'Sign Out' : 'Sign In'}</NavLink></li>\n                  </ul>\n              </nav>\n\n              <div className='btn-wrapper'>\n                <button onClick={()=>{if(!movies.isCoverShow){toggleIsPreferenceOpen(prev=>!prev)}}} className='btn-wrapper-controller'>Preference<i className=\"fas fa-arrow-circle-down\"></i></button>\n                <div className={`btn-wrapper-list ${isPreferenceOpen ? 'open':''}`}>\n                  <button style={{'--btn-index':1}} onClick={()=>{toggleIsPreferenceOpen(prev=>!prev); history.push('/history')}}>History</button>\n                  <button style={{'--btn-index':2}} onClick={()=>{toggleIsPreferenceOpen(prev=>!prev); history.push('/favorites')}}>Favorite</button>\n                </div>\n              </div>\n\n              <p>\n                <span onClick={()=>{if(!movies.isCoverShow) history.push('/cart')}} ><i className=\"fas fa-shopping-cart\"></i></span>\n                <span onClick={()=>{if(!movies.isCoverShow) toggleIsUserOpen()}}><i className=\"fas fa-user\"></i></span>\n              </p>\n              <section>\n                <input type='checkbox' onChange={()=>{if(!movies.isCoverShow) toggleIsMenuCheckboxChecked(prev=>!prev)}} checked={isMenuCheckboxChecked ? true : false}/>\n                <p className='menu-toggle-btn'><i className=\"fas fa-bars\"></i></p>\n                <p className='menu-toggle-items'>\n                  <span onClick={()=>{toggleIsMenuCheckboxChecked(false); history.push('/history')}}>History</span>\n                  <span onClick={()=>{toggleIsMenuCheckboxChecked(false); history.push('/favorites')}}>Favorite</span>\n                  <span>\n                    <span onClick={()=>{toggleIsMenuCheckboxChecked(false); history.push('/cart')}}><i className=\"fas fa-shopping-cart\"></i></span>\n                    <span onClick={()=>{toggleIsMenuCheckboxChecked(false); toggleIsUserOpen()}}><i className=\"fas fa-user\"></i></span>\n                  </span>\n                </p>\n              </section>\n            </header>\n        </div> \n    )\n}\n\nexport default Nav\n","import React, {useState, useContext} from 'react';\nimport './User.css';\nimport {MovieContext} from './MovieContext';\nimport axios from 'axios';\nimport * as firebase from 'firebase';\n\nfunction User() {\n    const [movies, setMovies] = useContext(MovieContext);\n    const [isEditing, toggleIsEditing] = useState(false);\n\n    const [newFirtName, setNewFirtName] = useState(movies.userInfo.first_name);\n    const [newLastName, setNewLastName] = useState(movies.userInfo.last_name);\n    const [newEmail, setNewEmail] = useState(movies.userInfo.email);\n    const [file, setFile] = useState(null);\n    const [isUpdatingImg, toggleIsUpdatingImg] = useState(false);\n\n    const handleUpdateUser = (e) => {\n        //console.log(e.target.id, e.target.value);\n        switch(e.target.id){\n            case 'firstName': setNewFirtName(e.target.value); break; \n            case 'lastName': setNewLastName(e.target.value); break; \n            default : setNewEmail(e.target.value); break;\n        }\n    }\n    const submitUpdatedUser = async() => {\n        //let today = new Date();\n        //let date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();        \n        // connect to backend and change the database\n        if(newFirtName === '' || newLastName === '' || newEmail === ''){\n            alert(`Invalid changes!\\n${newFirtName === '' ? \"First Name can't be blank\\n\" : \"\"}${newLastName === '' ? \"Last Name can't be blank\\n\" : ''}${newEmail === '' ? \"Email can't be blank\": ''}`);\n            return;\n        }\n        if(newFirtName === movies.userInfo.first_name && newLastName === movies.userInfo.last_name && newEmail === movies.userInfo.email){\n            alert('Nothing changes');\n            return;\n        }\n        try{        \n            if(newFirtName !== movies.userInfo.first_name || newLastName !== movies.userInfo.last_name){\n                const checkResult = await axios.post(`/check_user`,{\n                    firstName: newFirtName,\n                    lastName: newLastName,\n                    email: newEmail,\n                    password: ''\n                });           \n                const checkData = checkResult.data.message;\n                if(checkData !== 'no such user'){\n                    alert(`Your new username has been used!`);\n                    return;\n                }\n            }\n\n            /*const result =*/ await axios.post(`/update_user`, {\n                firstName: newFirtName,\n                lastName: newLastName,\n                email: newEmail,\n                uuid: movies.userInfo.uuid\n            });\n            \n            // const data = result.data;\n            // console.log(data);\n            alert('Update successfully');\n            setMovies({...movies, userInfo: {...movies.userInfo, first_name: newFirtName, last_name: newLastName, email: newEmail}});      \n            setFile(null);\n            toggleIsUpdatingImg(false);\n            toggleIsEditing(false);\n        }catch(err){\n              console.log(err);\n        }       \n    }\n\n    const quitEditing = () => {\n        // console.log('quit');\n        setNewFirtName(movies.userInfo.first_name);\n        setNewLastName(movies.userInfo.last_name);\n        setNewEmail(movies.userInfo.email);\n        toggleIsUpdatingImg(false);\n        toggleIsEditing(false);\n        setFile(null);\n    }\n\n    const handleDeleteUser = async() => {\n        // In React.js, you have to use window.confirm('')\n        if(!window.confirm('It will delete your all buying history and favorite lists.\\n Are you sure you want to delete the user?')) return;\n        try{           \n            /* let results =*/ await axios.post(`/delete_user`, {\n                uuid: movies.userInfo.uuid\n            });\n            //console.log(results.data.message)\n            alert('User has been deleted!');\n            toggleIsEditing(false);\n            toggleIsUpdatingImg(false);\n            setFile(null);\n            setMovies({...movies, cart: [], isLogin: false, isHistoryLoaded: false,userHistory: [], isUserFavLoaded: false, userFav: []});\n        }catch(err){\n            console.log(err);\n        }\n    }\n\n    const uploadFile = () => {\n       //console.log(file);\n       if(file === null){\n           alert(`You haven't chosen any image!`);\n           return;\n       }\n       if(!file.type.includes('image')){\n           alert(`You can't choose the file that is not image!`);\n           return;\n       }\n       if(file.name === movies.userInfo.img_name){\n           alert(`You can't use the image having the same name as your old one!`);\n           return;\n       }\n       const storage = firebase.storage().ref();\n       storage.child(file.name).put(file)\n         .then(snapshot => \n           snapshot.ref.getDownloadURL()\n             .then(url => handleUploadImg(url))\n         )\n    }\n\n    const handleUploadImg = async(url) => {\n        try{\n            /*let results =*/ await axios.post(`/upload_img`, {\n                uuid: movies.userInfo.uuid,\n                img_name: file.name,\n                img_url: url\n            });\n            //console.log(results.data);\n            alert('Image has been updated!');\n            setMovies({...movies, userInfo:{...movies.userInfo, img_name: file.name, img_url: url}})\n            toggleIsEditing(true);\n            setFile(null);\n            toggleIsUpdatingImg(false);\n        }catch(err){\n            console.log(err);\n        }\n    }\n\n    if(!movies.isLogin && isEditing){\n        toggleIsEditing(false);\n        toggleIsUpdatingImg(false);\n        setFile(null);\n    } \n    \n    return (\n      <div className='user-outer-container'> \n        { movies.isLogin ?\n            <div className=\"user-container\">\n                <h1>User Profile</h1>\n                <img src={movies.userInfo.img_url} alt=''/>\n                { isEditing ? \n                  <div style={{width: '100%'}}>\n                    {isUpdatingImg ? \n                    <div className='upload-btn'>\n                        <label htmlFor='select-is-updating'>\n                          <i className=\"far fa-file-image\"></i>\n                          <span>{file===null ? 'No image chosen' : file.name}</span>\n                        </label>\n                        <input style={{display: 'none'}} id='select-is-updating' type=\"file\" onChange={e => setFile(e.target.files.item(0))} />\n                        <div>\n                          <button id='submit-is-updating' onClick={uploadFile}>OK</button>\n                          <button id='close-is-updating' onClick={()=>toggleIsUpdatingImg(false)}>Cancel</button>\n                        </div>\n                    </div>\n                    :<div className='upload-btn'>\n                        <button id='open-is-updating' onClick={()=>toggleIsUpdatingImg(true)}>Upload image</button>\n                    </div>\n                    }\n                  </div>  \n                 :\n                 <span></span>\n                }\n                <div className='user-info'>\n                <p>First Name: {isEditing ? <input id='firstName' type='text' value={newFirtName} onChange={handleUpdateUser}/> : <span>{movies.userInfo.first_name}</span>}</p>\n                <p>Last Name: {isEditing ? <input id='lastName' type='text' value={newLastName} onChange={handleUpdateUser}/> : <span>{movies.userInfo.last_name}</span>}</p>\n                <p>Email: {isEditing ? <input id='email' type='text' value={newEmail} onChange={handleUpdateUser}/> : <span>{movies.userInfo.email}</span>}</p>\n                <p>Register Date: <span>{movies.userInfo.register_date}</span></p>\n                </div>\n                <div className='user-btn'>\n                {isEditing ? <button onClick={()=>submitUpdatedUser()}>Save Change</button> : <button onClick={()=>{setNewFirtName(movies.userInfo.first_name); setNewLastName(movies.userInfo.last_name); setNewEmail(movies.userInfo.email); toggleIsEditing(true)}}>Update User</button>}\n                {isEditing ? <button onClick={()=>quitEditing()}>Cancel</button> : <button onClick={()=>handleDeleteUser()}>Delete User</button>}\n                </div>\n            </div> \n            :\n            <div className=\"user-container\">\n                <h1>User Profile</h1>\n                <p>Please log in to see the user profile</p>\n            </div>    \n        }\n      </div>  \n    )\n}\n\nexport default User\n","import React from 'react';\nimport  './Layout.css';\n\nfunction Layout(prop) {\n    return (\n        <div className={`layout-container ${prop.isUserOpen ? \"open\":\"\"}`}>\n            {prop.children}\n        </div>\n    )\n}\n\nexport default Layout\n","import React, {useContext} from 'react';\nimport './Cover.css';\nimport {MovieContext} from './MovieContext';\nimport {useHistory} from 'react-router-dom';\n\nfunction Cover() {\n    const history = useHistory();\n    const [movies, setMovies] = useContext(MovieContext);\n    \n    return (\n        <div className={`cover-container ${movies.isCoverShow ? '':'hide'}`}>\n          <div> \n            <div className='cover-container-fadein'>\n              <div>\n                <h1>\n                    <span style={{'--fadein-span-index': 1}}>Welcome</span>\n                    <span style={{'--fadein-span-index': 2}}>to</span>\n                    <span style={{'--fadein-span-index': 3}}>Movie</span>\n                    <span style={{'--fadein-span-index': 4}} >Center</span>\n                </h1>\n              </div>\n            </div>\n\n            <div className='cover-container-scale'>\n                <div>\n                    <p>Find your favorite movie and buy it </p>\n                </div>\n            </div>\n       \n            <div className='cover-container-btn cover-container-btn-1'>\n                <div className=\"btn-wrapper\">\n                    <button onClick={()=>{\n                        setMovies({...movies, isCoverShow: false});\n                        history.push('/signin');\n                    }}>Sign In</button>\n                    <div className=\"btn-top-left\"></div>\n                    <div className=\"btn-bottom-right\"></div>\n                    <div className=\"btn-cover\"></div>\n                </div>\n            </div>\n            <div className='cover-container-btn cover-container-btn-2'>\n                <div className=\"btn-wrapper\">\n                    <button onClick={()=>setMovies({...movies, isCoverShow: false})}>Visit Now</button>\n                    <div className=\"btn-top-left\"></div>\n                    <div className=\"btn-bottom-right\"></div>\n                    <div className=\"btn-cover\"></div>\n                </div>\n            </div>\n          </div>\n        </div>\n    )\n}\n\nexport default Cover\n","import React from 'react'\nimport \"./About.css\";\n\nfunction About() {\n    return (\n        <div className='about-container'>\n            <h1>About Movie Center</h1>\n            <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Vero sapiente corporis exercitationem adipisci, labore error. Corporis fugiat, quas ipsum error aperiam provident rem odit quae dolores a odio repudiandae commodi, consectetur illum, et eius! Repellat animi, inventore praesentium vel facere quos corporis laboriosam fugiat est exercitationem ipsa aperiam consectetur, quia eos, quam nisi. Cum odit eaque laboriosam dolorem porro accusamus quae facere nulla voluptatum! Numquam, obcaecati quod hic aliquam sed itaque eius quas veritatis at sit, magni quidem laudantium accusantium iure ullam commodi odio ipsum totam quae delectus vero mollitia nobis esse. Corporis hic facere neque harum, sapiente nemo veritatis illo vero eligendi incidunt amet eveniet non itaque tempore reprehenderit? Quas sed quam non sequi voluptate doloribus modi voluptatibus labore nam, blanditiis dicta. Distinctio possimus aut voluptates delectus? Repellat fugit soluta voluptate esse optio quasi est impedit dolores praesentium harum incidunt, officia rem iure alias eos reiciendis quod ullam. Itaque ipsa sed dolore dolorum quaerat iusto rem, laborum adipisci nostrum. Aut quae, id praesentium corporis delectus expedita maxime unde reprehenderit rem, qui dolorum illo commodi in doloribus similique nam modi illum facilis nesciunt, totam dolores! Laboriosam libero nesciunt ad, ab amet voluptas exercitationem nulla consectetur ea iusto dolores voluptate, distinctio quasi voluptatibus nemo pariatur vel quas asperiores, porro voluptatum. Error nisi possimus inventore eveniet assumenda quasi quam id repellat maxime non quae consequuntur quos earum perspiciatis nam neque blanditiis architecto optio tempore, tenetur cum iure? Impedit ipsa enim illum magni sit quia ea, mollitia debitis, nesciunt dolore odit quo, sunt tenetur amet tempora repellendus labore.</p>\n        </div>\n    )\n}\n\nexport default About\n","import React, {useContext, useState, useEffect} from 'react';\nimport axios from 'axios';\nimport './Cart.css';\nimport {MovieContext} from '../components/MovieContext';\nconst uuid = require('uuidv4').default;\n\nfunction Cart() {\n    const [movies, setMovies] = useContext(MovieContext);\n    const [addToFavLists, setAddToFavLists] = useState([]);\n\n    const setAmount = (action, index) => {\n        if(action === 'plus' && movies.cart[index].amount < 5){\n            setMovies({...movies, cart: movies.cart.map((movie, _i) => {\n                if(_i === index) return {...movie, amount: movie.amount+1};\n                else return movie;\n            })});\n        }\n        if(action === 'minus' && movies.cart[index].amount > 1){\n            setMovies({...movies, cart: movies.cart.map((movie, _i) => {\n                if(_i === index) return {...movie, amount: movie.amount-1};\n                else return movie;\n            })});\n        }\n    }\n\n    const deleteItem = (item) => {\n        setMovies({...movies, cart: movies.cart.filter(movie => movie !== item)});\n        setAddToFavLists([]);\n    }\n\n    const handleOrder = async() => {\n      if(!movies.isLogin){\n          alert('You are not logging in!');\n          return;\n      }\n      if(movies.cart.length === 0){\n          alert(\"You haven't bought anything yet!\");\n          return;\n      }    \n      try{\n          let results = await axios.post('/save_history', {\n            user_id: movies.userInfo.id,\n            uuid: movies.userInfo.uuid,\n            movies_info: movies.cart\n          })\n          const data = results.data;\n          console.log(data);\n          alert('Order has been sent!');\n          setMovies({...movies, cart:[], isHistoryLoaded: false});\n      }catch(err){\n          console.log(err);\n      }\n    }\n\n    const addToFavorite = (item) => {\n      if(addToFavLists.indexOf(item) < 0) setAddToFavLists([...addToFavLists, item])\n      else setAddToFavLists(prev => prev.filter(fav => fav !== item))\n    }\n\n    const saveToFavorite = async() => {\n        if(!movies.isLogin){\n            alert('You are not logging in!');\n            return;\n        }\n        if(addToFavLists.length === 0){\n            alert('Please choose the item you want to add into your favorite!')\n            return;\n        }\n        try{\n            let newUUIDs = [];\n            for(let i = 0; i < addToFavLists.length; i++){\n                newUUIDs.push(uuid());\n            }\n            await axios.post(`/save_favorites`, {\n                user_id: movies.userInfo.id,\n                uuid: movies.userInfo.uuid, \n                fav_info: addToFavLists,\n                fav_uuid: newUUIDs\n            });\n            alert('Movies you choose have been added to favorites!');\n            setAddToFavLists([]);\n            setMovies({...movies, isUserFavLoaded: false});\n        }catch(err){\n            console.log(err);\n        }\n    }\n\n    useEffect(() => {\n        window.scrollTo(0, 0); \n        return () => {           \n        };\n    }, [])\n\n    return (\n        <div className='cart-container'>\n            <header>\n                <h1><i className=\"fas fa-shopping-cart icon-resize\"></i>{movies.isLogin ? `${movies.userInfo.first_name} ${movies.userInfo.last_name}'s Cart` : \"You are not logging in\"}</h1>\n                <p id='total'>Total: $<span>{movies.cart.length === 0 ? 0 : movies.cart.reduce((acc, current)=> acc + current.amount*current.price, 0)}</span></p>\n            </header>\n\n            <main>\n                <ul>\n                {movies.cart.length === 0 ? <h4 style={{textAlign:'center', fontSize: \"24px\"}}>You haven't bought anything yet...</h4> :\n                  movies.cart.map((item, index) => \n                  <li key={item.title} data-last={index+1 === movies.cart.length ? 'true':''}>\n                    <section>\n                        <img src={item.img} alt=\"\" />\n                        <h2>{item.title}</h2>\n                        <p className=\"price\"><span>${item.price}</span></p>\n                        <p className=\"amount\">Amount: <span>{item.amount}</span>\n                            <button onClick={()=>setAmount('plus',index)} className={item.amount===5 ? \"disable\" : \"\"}>+</button>\n                            <button onClick={()=>setAmount('minus',index)} className={item.amount===1 ? \"disable\" : \"\"}>–</button>\n                        </p>\n                        <p className=\"each-total-price\">total: $<span>{item.amount * item.price}</span>\n                            <button onClick={()=>deleteItem(item)}><i className=\"far fa-trash-alt\" ></i> Delete</button>\n                            <button onClick={()=>addToFavorite(item)} className={addToFavLists.indexOf(item) >= 0 ? 'disable': ''}>{addToFavLists.indexOf(item) >= 0 ? 'Undo to Favorite':'Add to Favorite'}</button>\n                        </p>\n                    </section>\n                  </li>                     \n                  )}    \n                </ul>\n            </main> \n            <div className='utility-btn'>\n                <button onClick={()=>handleOrder()} className=\"exit-Btn\">Place Order</button> \n                <button onClick={()=>saveToFavorite()} className=\"exit-Btn\">Add to Favorite</button> \n            </div>          \n        </div>\n    )\n}\n\nexport default Cart\n","import React, {useContext, useState} from 'react';\nimport './SignIn.css';\nimport {MovieContext} from '../components/MovieContext';\nimport axios from 'axios';\n\nfunction SignIn() {\n    const [movies, setMovies] = useContext(MovieContext);\n    const [enteredFirstName, setEnteredFirstName] = useState('');\n    const [enteredLastName, setEnteredLastName] = useState('');\n    const [enteredPassword, setEnteredPassword] = useState('');\n    const [createdFirstName, setCreatedFirstName] = useState('');\n    const [createdLastName, setCreatedLastName] = useState('');\n    const [createdPassword, setCreatedPassword] = useState('');\n    const [createdEmail, setCreatedEmail] = useState('');\n    // const [reloadPage, toggleReloadPage] = useState(true);\n    const [isSigningIn, toggleIsSigningIn] = useState(true);\n    \n    const handleEnterChange = (e) => {\n        switch(e.target.id){\n            case 'firstName': setEnteredFirstName(e.target.value); break;\n            case 'lastName': setEnteredLastName(e.target.value); break;\n            default: setEnteredPassword(e.target.value); break;\n        }\n    }\n\n    const handleSignin = async() => {\n        if(enteredFirstName === '' || enteredLastName === '' || enteredPassword === ''){\n          alert(`Invalid inputs!\\n${enteredFirstName === '' ? \"First Name can't be blank\\n\" : \"\"}${enteredLastName === '' ? \"Last Name can't be blank\\n\" : ''}${enteredPassword === '' ? \"Password can't be blank\": ''}`);\n          return;\n        }\n        try{\n            const data = await axios.post(`/find_user`, {\n                  firstName: enteredFirstName,\n                  lastName: enteredLastName,\n                  password: enteredPassword,          \n            })\n            const result = data.data.result;\n            if(result === 'no result'){\n                alert('No such user or wrong password!');\n            }else{\n              // console.log(result);  \n              setMovies({...movies, isLogin: true, userInfo: result});\n              // toggleReloadPage(prev => !prev);\n            }\n        }catch(err){\n            console.log(err);\n        }\n    }\n\n    const handleSignout = () => {\n        setMovies({...movies, cart: [], isLogin: false, isHistoryLoaded: false,userHistory: [], isUserFavLoaded: false, userFav: []});\n    }\n\n    const handleCreatedChange = (e) => {\n        switch(e.target.id){\n            case 'firstName-create': setCreatedFirstName(e.target.value); break;\n            case 'lastName-create': setCreatedLastName(e.target.value); break;\n            case 'email-create': setCreatedEmail(e.target.value); break;\n            default: setCreatedPassword(e.target.value); break;\n        }\n    }\n\n    const handleCreateNewUser = async() => {\n      if(createdFirstName === '' || createdLastName === '' || createdEmail === '' || createdPassword === ''){\n          alert(`Invalid inputs!\\n${createdFirstName === '' ? \"First Name can't be blank\\n\" : \"\"}${createdLastName === '' ? \"Last Name can't be blank\\n\" : ''}${createdPassword === ''? \"Password can't be blank\\n\" : ''}${createdEmail === '' ? \"Email can't be blank\": ''}`);\n          return;\n      }  \n      try{\n        const data = await axios.post(`/check_user`, {\n            firstName: createdFirstName,\n            lastName: createdLastName,\n            email: createdEmail,\n            password: createdPassword\n        });\n        const result = data.data;\n\n        if(result.message === 'no such user'){\n            await axios.post(`/create_user`, {\n                firstName: createdFirstName,\n                lastName: createdLastName,\n                email: createdEmail,\n                password: createdPassword\n            });\n            //const createdResult = createdData.data;\n            alert('A new user is created');\n\n            setTimeout(async() => {\n                const newData = await axios.post(`/find_user`,{\n                      firstName: createdFirstName ,\n                      lastName: createdLastName,\n                      password: createdPassword ,        \n                })\n                const newResult = newData.data.result;\n                setMovies({...movies, isLogin: true, userInfo: newResult});\n                // toggleReloadPage(prev => !prev);\n            }, 500);\n        }else{\n            alert('This username is alreated used. Try another one!');\n        }\n    }catch(err){\n        console.log(err);\n      }\n    }\n\n    window.onscroll = () => {\n      // console.log('scrolling');\n      // if(movies.isCoverShow) window.scrollTo(0, 0);\n    }\n\n    return (\n        <div className=\"signin-container\">\n        {movies.isLogin ? \n          <div className='signin-container-signin'>\n              <h1>You are now signing in as {`${movies.userInfo.first_name} ${movies.userInfo.last_name}`}</h1>\n              <button onClick={()=>handleSignout()}>Sign out</button>\n          </div>\n        :\n          <div className='signin-container-both'>\n            <div className='signin-btn-controller'>\n                <button onClick={()=>toggleIsSigningIn(true)} className={isSigningIn ? '':'inactive'}>Sign In</button>\n                <button onClick={()=>toggleIsSigningIn(false)} className={isSigningIn ? 'inactive':''}>Register</button>\n            </div>\n            {isSigningIn ? \n              <div className='signin-form'>\n                <h1>Please sign in</h1>\n                <div>\n                  <p>\n                    <label htmlFor='firstName'>First Name: </label>\n                    <input type='text' id='firstName' value={enteredFirstName} onChange={handleEnterChange}/>\n                  </p>\n                  <p>\n                    <label htmlFor='lastName'>Last Name: </label>\n                    <input type='text' id='lastName' value={enteredLastName} onChange={handleEnterChange}/>\n                  </p>\n                  <p>\n                    <label htmlFor='password'>Password: </label>\n                    <input type='text' id='password' value={enteredPassword} onChange={handleEnterChange}/> \n                  </p>                             \n                </div>\n                <button onClick={()=>handleSignin()}>Sign in</button>\n              </div>\n            :\n              <div className='signup-form'>\n                <h1>Create a new account</h1>\n                <div>\n                  <p>\n                    <label htmlFor='firstName-create'>First Name: </label>\n                    <input type='text' id='firstName-create' value={createdFirstName} onChange={handleCreatedChange}/>\n                  </p>\n                  <p>\n                    <label htmlFor='lastName-create'>Last Name: </label>\n                    <input type='text' id='lastName-create' value={createdLastName} onChange={handleCreatedChange} />\n                  </p>  \n                  <p>\n                    <label htmlFor='password-create'>Password: </label>\n                    <input type='text' id='password-create' value={createdPassword} onChange={handleCreatedChange} />\n                  </p>\n                  <p>\n                    <label htmlFor='email-create'>Email: </label>\n                    <input type='text' id='email-create' value={createdEmail} onChange={handleCreatedChange}/>\n                  </p>               \n                </div> \n                <button onClick={()=>handleCreateNewUser()}>Create new user</button>\n              </div>\n            }     \n          </div>  \n        }    \n        </div>\n    )\n}\n\nexport default SignIn\n","import React, {useContext, useEffect} from 'react';\nimport {MovieContext} from '../components/MovieContext';\nimport axios from 'axios';\nimport './History.css';\nconst uuid = require('uuidv4').default;\n\nfunction History() {\n    const [movies, setMovies] = useContext(MovieContext);\n    const getUserHistory = async() => {\n      try{\n        let results = await axios.post(`/get_history`, {\n           uuid: movies.userInfo.uuid\n        })\n        const data = results.data;\n        // console.log(data);\n        setMovies({...movies, isHistoryLoaded:true ,userHistory: data.history})\n      }catch(err){\n        console.log(err);\n      }\n    }\n\n    const renderUserHistory = (_movies) => {\n      // console.log('render user history');\n      // console.log(_movies);\n      if(_movies.length === 0) return <h1>User has no shopping history</h1>\n      else {\n        let historyTable = {}\n        _movies.forEach(_movie => {\n          if(historyTable[_movie.purchase_date] === undefined)  historyTable[_movie.purchase_date] = [_movie];\n          else historyTable[_movie.purchase_date] = [...historyTable[_movie.purchase_date],_movie];\n        })\n\n        return <div>\n          {Object.keys(historyTable).map((sameTime) => \n            <div className='history-each-time' key={uuid()}>\n              <h1><i className=\"fas fa-credit-card\"></i>{sameTime}<span>Total: {historyTable[sameTime].reduce((acc, st) => acc + st.amount * st.price, 0)}</span></h1>\n              <ul>\n                <li className='history-each-time-li'>\n                  <p>Title</p>\n                  <p>Price</p>\n                  <p>Amount</p>\n                </li>\n                {historyTable[sameTime].map(eachTime => \n                  <li className='history-each-time-li' key={uuid()}>\n                    <p>\n                      <img width='50' height='50' src={eachTime.img} alt=''/>\n                      <span>{eachTime.title}</span>\n                    </p>\n                    <p><span>{eachTime.price}</span></p>\n                    <p><span>{eachTime.amount}</span></p>\n                  </li>  \n                 )}\n              </ul>\n            </div>\n          ).reverse()}\n        </div>  \n      }\n    }\n\n    useEffect(() => {\n      window.scrollTo(0, 0);\n      if(!movies.isHistoryLoaded && movies.isLogin){ \n        getUserHistory();\n      }\n      return () => {    \n      };\n    }, [])\n\n    return (\n        <div className='history-container'>\n        {movies.isLogin ? \n          <div className='history-login'>\n              <h1>{`${movies.userInfo.first_name} ${movies.userInfo.last_name}'s Buying History`}</h1>\n              { !movies.isHistoryLoaded ? \n                <h1>Loading user history...</h1>\n                : renderUserHistory(movies.userHistory) \n              }\n              <button onClick={()=>getUserHistory()}>Load history</button>\n          </div>\n        :\n          <h1 className='no-login-h1'>You are not logging in</h1>\n        }\n        </div>\n    )\n}\n\nexport default History;\n\n                 // { <div>\n                    // <ul>\n                    // {  movies.userHistory.length === 0 ? \n                    //      <h1>User has no shopping history</h1>\n                    //      : \n                    //      movies.userHistory.map(movie => \n                    //        <li key={movie.title}>{`title: ${movie.title} purchase_date: ${movie.purchase_date}`}</li>\n                    //      )               \n                    // }\n                    // </ul>\n               // </div> }\n","import React, {useContext, useEffect, useState} from 'react';\nimport './Favorites.css';\nimport {MovieContext} from '../components/MovieContext';\nimport axios from 'axios';\n\n\nfunction Favorites() {\n    const [movies, setMovies] = useContext(MovieContext);\n    const [isDeletingFavs, toggleIsDeletingFavs] = useState(false);\n    const [deleteFavs, setDeleteFavs] = useState([]);\n    const [isAddToCartFavs, toggleIsAddToCartFavs] = useState(false);\n    const [addToCartFavs, setAddToCartFavs] = useState([]);\n\n    const getUserFavorites = async() => {\n        try{\n            let results = await axios.post(`/find_favorites`, {\n                uuid: movies.userInfo.uuid\n            })\n            const data = results.data;\n            // console.log(data);\n            setMovies({...movies, isUserFavLoaded: true, userFav: data})\n        }catch(err){\n            console.log(err);\n        }\n    }\n\n    const removeFavOne = (item) => {\n      if(deleteFavs.indexOf(item) < 0) setDeleteFavs([...deleteFavs, item])\n      else setDeleteFavs(prev => prev.filter(_item => _item !== item))\n    }\n\n    const commitRemoveFav = async() => {\n        //console.log(deleteFavs)\n        if(deleteFavs.length === 0){\n            alert('Please choose the one you want to remove!');\n            return;\n        }\n        try{\n           await axios.post(`/delete_favorites`, {\n               fav_uuids: deleteFavs.map(del => del.fav_uuid)\n           })\n           alert('The movies you choose has been removed!');\n           //setDeleteFavs([]);\n           toggleIsDeletingFavs(false);\n           setMovies({...movies, userFav: movies.userFav.filter(fav => { return !deleteFavs.includes(fav)})});\n           setDeleteFavs([]);\n           setAddToCartFavs([]);\n           // setTimeout(()=>getUserFavorites(),500); \n        }catch(err){\n            console.log(err)\n        }\n    }\n\n    const addToCartOnes = (item) => {\n        if(addToCartFavs.indexOf(item) < 0) setAddToCartFavs([...addToCartFavs, item])\n        else setAddToCartFavs(prev => prev.filter(_item => _item !== item))\n    }\n\n    const commitAddToCart = () => {\n      //console.log(addToCartFavs)  \n      if(addToCartFavs.length === 0){\n          alert('Please choose the ones you want to add to the cart!');\n          return;\n      }\n      let buyingMovies = addToCartFavs.map(fav => { return  {\n          title: fav.title,\n          img: fav.img,\n          price: fav.price,\n          amount: 1\n      }});\n      setAddToCartFavs([]);\n      toggleIsAddToCartFavs(false);\n      setDeleteFavs([]);\n      setMovies({...movies, cart:[...movies.cart, ...buyingMovies]})\n      alert('The movies you choose have been sent to cart!');\n    }\n\n    const renderUserFavorite = (_favorites) => {\n        if(_favorites.length === 0) return <h1>User has no favorite lists</h1>\n        else{\n            // let reversedFav = [];\n            // for(let i = _favorites.length-1 ; i >= 0; i--){\n            //     reversedFav.push(_favorites[i]);\n            // }\n            return <div className='fav-list-container'>\n            {\n                <ul>\n                  <li className='fav-list-li'>\n                    <p>Title</p>\n                    <p>Price</p>\n                    <p>Add Date</p>\n                  </li>\n                  {             \n                    _favorites.map((fav, _i) => \n                        <li className='fav-list-li' key={fav.fav_uuid}>                         \n                          <p>\n                            <img width='25' height='25' src={fav.img} alt=''/>\n                             <span>{fav.title}</span>\n                          </p>\n                          <p>{fav.price}</p>\n                          <p>\n                            <span>{fav.add_date}</span>\n                            {isDeletingFavs ? <span>\n                              <input type='checkbox' id={`del-checkbox-${_i}`} onChange={()=>removeFavOne(fav)} checked={ deleteFavs.includes(fav)  ? true : false} />\n                              <label htmlFor={`del-checkbox-${_i}`}>Remove</label>\n                            </span>\n                            : <span></span> }\n                            {isAddToCartFavs ? <span>\n                              <input type='checkbox' id={`add-checkbox-${_i}`} onChange={()=>addToCartOnes(fav)} checked={ addToCartFavs.includes(fav) ? true: false}/>\n                              <label htmlFor={`add-checkbox-${_i}`}>Add</label>\n                            </span>\n                            : <span></span>}\n                          </p>\n                        </li>\n                    ).reverse()}\n                </ul>\n            }\n            </div>\n        } \n    }\n\n    const renderFavCommitBtns = () => {\n        if(!isAddToCartFavs && !isDeletingFavs){\n            return <div className='fav-commit-btn'></div>\n        } else if(isDeletingFavs && !isAddToCartFavs){\n            return <div className='fav-commit-btn'>\n                <button  onClick={()=>commitRemoveFav()}>Confirm Removing</button>\n                <button  onClick={()=>toggleIsDeletingFavs(false)}>Cancel Removing</button>\n            </div>\n        }else {\n            return <div className='fav-commit-btn'>\n                <button  onClick={()=>commitAddToCart()}>Confirm Adding</button>\n                <button  onClick={()=>toggleIsAddToCartFavs(false)}>Cancel Adding</button>\n            </div>\n        }\n    }\n\n    useEffect(() => {\n        window.scrollTo(0, 0); \n        if(!movies.isUserFavLoaded && movies.isLogin){\n            getUserFavorites();\n        }\n        return () => {          \n        };\n    }, [])\n\n    return (\n        <div className='favorites-container'>\n        {movies.isLogin ? \n          <div className='favorite-login'>\n              <h1>{`${movies.userInfo.first_name} ${movies.userInfo.last_name}'s Favorite Movies`}</h1>\n              { !movies.isUserFavLoaded ? \n                <h1>Loading user Favorites...</h1>\n                : renderUserFavorite(movies.userFav) \n              }\n              { renderFavCommitBtns() }\n              <div className='fav-getuser-btn'>\n                <button onClick={()=>getUserFavorites()}>Load favorite</button>\n                <button onClick={()=>{if(!isAddToCartFavs){toggleIsDeletingFavs(prev=>!prev)}}} ><i className=\"fas fa-trash-alt\"></i>{isDeletingFavs ? 'Cancel Removing': 'Remove Items'}</button>\n                <button onClick={()=>{if(!isDeletingFavs){toggleIsAddToCartFavs(prev=>!prev)}}} ><i className=\"fas fa-cart-plus\"></i>{isAddToCartFavs ? 'Cancel Adding' : 'Add to Cart'}</button>\n              </div>  \n          </div>\n        :\n          <h1 className='no-login-h1'>You are not logging in</h1>\n        }  \n        </div>\n    )\n}\n\nexport default Favorites\n\n\n// {deleteFavs.indexOf(fav) < 0 ? \n//     <button onClick={()=>removeFavOne(fav)}>Remove</button>\n//    :\n//     <button onClick={()=>removeFavOne(fav)}>Undo</button>\n//   }\n\n\n// {addToCartFavs.indexOf(fav) < 0 ?\n//                                 <button onClick={()=>addToCartOnes(fav)}>Add to Cart</button>\n//                                :\n//                                 <button onClick={()=>addToCartOnes(fav)}>Undo</button> \n//                                }","import React ,{ useState }from 'react';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport './App.css';\n//import 'bootstrap/dist/css/bootstrap.min.css';\n//import {Button, ButtonToolbar, Table} from 'react-bootstrap';\n// import axios from 'axios';\nimport Header from './components/Header';\nimport Scroll from './components/Scroll';\nimport Grid from './components/Grid';\nimport Nav from './components/Nav';\nimport User from './components/User';\nimport Layout from './components/Layout';\nimport Cover from './components/Cover';\nimport About from './pages/About';\nimport Cart from './pages/Cart';\nimport SignIn from './pages/SignIn';\nimport History from './pages/History';\nimport Favorites from './pages/Favorites';\nimport { MovieProvider } from './components/MovieContext';\n\nfunction App() {\n  \n  const [isUserOpen, toggleIsUserOpen] = useState(false);\n  // const [isUserIpGot, toggleIsUserIpGot] = useState(false);\n\n  // if(!isUserIpGot){\n  //   console.log('fetching user ip');\n  //   toggleIsUserIpGot(true);\n  //   setTimeout(() => handleGetUserIp(), 200);\n  // }\n\n  // const handleGetUserIp = async () => {\n  //   try{\n  //     const result = await axios.get('/get_user_ip');\n      \n  //     const data = result.data;\n  //     console.log(data.ip);\n  //   }catch(err){\n  //       console.log(err);\n  //   }\n  // }\n\n  return (\n    <div className='app'>\n      <MovieProvider>\n        <Router> \n          <Cover />\n          <Header>\n            <Nav toggleIsUserOpen={()=>toggleIsUserOpen(prev=>!prev)} />\n          </Header>\n          <Layout isUserOpen={isUserOpen}>\n            <Switch>\n              <Route exact path=\"/\">\n                <div>\n                  <Scroll /> \n                  <Grid/>\n                </div>\n              </Route>\n              <Route path=\"/about\">\n                <About />\n              </Route>\n              <Route path=\"/cart\">\n                <Cart />\n              </Route>\n              <Route path=\"/signin\">\n                <SignIn />\n              </Route>\n              <Route path=\"/history\">\n                <History />\n              </Route>\n              <Route path=\"/favorites\">\n                <Favorites />\n              </Route>\n            </Switch>\n            <User />\n          </Layout>\n        </Router>  \n      </MovieProvider>\n    </div>    \n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport * as firebase from \"firebase\";\n\nvar firebaseConfig = {\n    apiKey: \"AIzaSyC0DBRR8haP41-6zo7vw5JvVjVnqS3CzYQ\",\n    authDomain: \"firebasics-f5c4c.firebaseapp.com\",\n    databaseURL: \"https://firebasics-f5c4c.firebaseio.com\",\n    projectId: \"firebasics-f5c4c\",\n    storageBucket: \"firebasics-f5c4c.appspot.com\",\n    messagingSenderId: \"855509520491\",\n    appId: \"1:855509520491:web:8870d368a6d413ce\" \n  };\nfirebase.initializeApp(firebaseConfig);\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}